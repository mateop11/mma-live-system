<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MMA Live - Vista P√∫blica</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Oswald:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root { --mma-red: #dc2626; --mma-dark: #0f0f0f; --mma-gold: #fbbf24; }
        body { background: linear-gradient(135deg, var(--mma-dark) 0%, #1a1a2e 50%, #16213e 100%); min-height: 100vh; font-family: 'Oswald', sans-serif; color: #f3f4f6; }
        .navbar { background: rgba(0,0,0,0.8) !important; border-bottom: 2px solid var(--mma-gold); }
        .navbar-brand { font-family: 'Bebas Neue', sans-serif; font-size: 1.8rem; letter-spacing: 3px; }
        .navbar-brand span:first-child { color: #fff; }
        .navbar-brand span:last-child { color: var(--mma-red); }
        .nav-link { color: #9ca3af !important; }
        .nav-link:hover { color: var(--mma-gold) !important; }
        .main-content { padding: 2rem 0; }
        .section-title { font-family: 'Bebas Neue', sans-serif; font-size: 2rem; letter-spacing: 3px; margin-bottom: 1.5rem; }
        .card { background: linear-gradient(180deg, #1f2937 0%, #111827 100%); border: 1px solid rgba(255,255,255,0.05); border-radius: 16px; }
        .fighter-card { transition: transform 0.3s; cursor: pointer; }
        .fighter-card:hover { transform: translateY(-5px); }
        .fighter-name { font-family: 'Bebas Neue', sans-serif; font-size: 1.3rem; letter-spacing: 1px; color: #ffffff; }
        .fighter-club { color: #9ca3af !important; }
        .record { font-size: 1.5rem; font-family: 'Bebas Neue', sans-serif; letter-spacing: 2px; }
        .bout-fighter { color: #ffffff; font-family: 'Bebas Neue', sans-serif; font-size: 1.4rem; }
        .bout-rounds { color: #9ca3af; }
        .record-w { color: #10b981; }
        .record-l { color: #ef4444; }
        .record-d { color: #6b7280; }
        .category-badge { background: var(--mma-gold); color: #000; padding: 4px 12px; border-radius: 20px; font-size: 0.75rem; }
        .bout-card { border-left: 4px solid var(--mma-gold); }
        .bout-card.live { border-left-color: var(--mma-red); animation: pulse-border 1.5s infinite; }
        @keyframes pulse-border { 0%, 100% { border-left-color: var(--mma-red); } 50% { border-left-color: rgba(220,38,38,0.3); } }
        .vs-badge { background: var(--mma-red); color: white; padding: 4px 12px; border-radius: 4px; font-weight: bold; }
        .live-badge { background: var(--mma-red); padding: 4px 12px; border-radius: 20px; font-size: 0.75rem; animation: blink 1s infinite; }
        @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
    </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark">
        <div class="container">
            <a class="navbar-brand" href="/"><span>MMA</span><span>LIVE</span></a>
            <ul class="navbar-nav ms-auto">
                <li class="nav-item"><a class="nav-link" href="/login.html">üîê Iniciar Sesi√≥n</a></li>
            </ul>
        </div>
    </nav>

    <div class="main-content">
        <div class="container">
            <!-- Peleas en Vivo -->
            <div id="liveSection" style="display: none;" class="mb-5">
                <h2 class="section-title">üî¥ Peleas en Vivo</h2>
                <div class="row g-4" id="liveBoutsContainer"></div>
            </div>
            
            <!-- Pr√≥ximas Peleas -->
            <h2 class="section-title">‚öîÔ∏è Peleas Programadas</h2>
            <div class="row g-4 mb-5" id="scheduledBouts"></div>
            
            <!-- Peleadores -->
            <h2 class="section-title">ü•ä Roster de Peleadores</h2>
            <div class="row g-3" id="fightersContainer"></div>
        </div>
    </div>

    <script>
        const API_BASE = window.location.origin;
        
        async function loadData() {
            // Cargar peleadores
            const fightersRes = await fetch(`${API_BASE}/api/public/fighters`);
            const fighters = await fightersRes.json();
            
            document.getElementById('fightersContainer').innerHTML = fighters.map(f => `
                <div class="col-md-3">
                    <div class="card fighter-card p-3">
                        <div class="d-flex justify-content-between align-items-start mb-2">
                            <span class="category-badge">${f.categoryWeight || 'N/A'}</span>
                            <span class="badge ${f.status === 'Active' ? 'bg-success' : 'bg-secondary'}">${f.status || 'Active'}</span>
                        </div>
                        <h5 class="fighter-name">${f.firstName} ${f.lastName}</h5>
                        <div class="fighter-club small mb-2">${f.club || 'Sin club'}</div>
                        <div class="record">
                            <span class="record-w">${f.recordW || 0}</span>-<span class="record-l">${f.recordL || 0}</span>-<span class="record-d">${f.recordD || 0}</span>
                        </div>
                    </div>
                </div>
            `).join('');
            
            // Cargar peleas
            const boutsRes = await fetch(`${API_BASE}/api/public/bouts`);
            const bouts = await boutsRes.json();
            
            const liveBouts = bouts.filter(b => b.state === 'EnCurso');
            const scheduled = bouts.filter(b => b.state === 'Programada');
            
            if (liveBouts.length > 0) {
                document.getElementById('liveSection').style.display = 'block';
                document.getElementById('liveBoutsContainer').innerHTML = liveBouts.map(b => `
                    <div class="col-md-6">
                        <div class="card bout-card live p-4">
                            <div class="d-flex justify-content-between mb-3">
                                <span class="live-badge">üî¥ EN VIVO</span>
                                <span class="bout-rounds">Round ${b.currentRound || 1}/${b.totalRounds || 3}</span>
                            </div>
                            <div class="text-center">
                                <h4 class="bout-fighter">${b.fighter1?.firstName || '?'} ${b.fighter1?.lastName || ''}</h4>
                                <span class="vs-badge my-2">VS</span>
                                <h4 class="bout-fighter">${b.fighter2?.firstName || '?'} ${b.fighter2?.lastName || ''}</h4>
                            </div>
                        </div>
                    </div>
                `).join('');
            }
            
            document.getElementById('scheduledBouts').innerHTML = scheduled.length > 0 
                ? scheduled.map(b => `
                    <div class="col-md-6">
                        <div class="card bout-card p-4">
                            <div class="text-center">
                                <h5 class="bout-fighter">${b.fighter1?.firstName || '?'} ${b.fighter1?.lastName || ''}</h5>
                                <span class="vs-badge my-2">VS</span>
                                <h5 class="bout-fighter">${b.fighter2?.firstName || '?'} ${b.fighter2?.lastName || ''}</h5>
                                <div class="mt-2 bout-rounds">${b.totalRounds || 3} Rounds</div>
                            </div>
                        </div>
                    </div>
                `).join('')
                : '<p class="text-muted">No hay peleas programadas</p>';
        }
        
        loadData();
        setInterval(loadData, 15000);
    </script>
</body>
</html>

